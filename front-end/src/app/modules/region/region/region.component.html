<div class="card">
  <form [formGroup]="form">
    <div class="grid p-fluid">
      <div class="col">
        <span class="p-float-label">
          <input id="float-input" formControlName="nome" type="text" pInputText>
          <label for="float-input">Nome da Região</label>
        </span>
      </div>
      <div class="col-fixed">
        <div class="flex align-items-center">
          <p-inputSwitch formControlName="active" id="active" inputId="active" ></p-inputSwitch>
          <label for="active" class="ml-2">{{ form.get('active').value ? 'Ativo' : 'Inativo' }}</label>
        </div>
      </div>
      <h4 class="col-12">Locais da região</h4>
      <div class="col-12 md:col-10">
        <p-dropdown [options]="cityOptions" formControlName="city" placeholder="Selecione a cidade"
                    [style]="{'width':'100%'}" [filter]="true" [showClear]="true"
                    emptyFilterMessage="Nenhuma cidade encontrada"
        ></p-dropdown>
      </div>
      <div class="col-12 md:col-2">
        <p-button label="Adicionar" icon="bx bx-plus" (click)="addCity()" styleClass="button-theme"></p-button>
      </div>

      <div class="col-12">
        <p-table [value]="cities" styleClass="mt-3" [responsive]="true">
          <ng-template pTemplate="header">
            <tr>
              <th style="width: 5rem" class="text-center">#</th>
              <th class="text-center">Cidade</th>
              <th style="width: 10rem" class="text-center">UF</th>
              <th style="width: 5rem" class="text-center">
                <i class="bx bx-cog"></i>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-i="rowIndex" let-city>
            <tr>
              <td class="text-center">{{ i + 1 }}</td>
              <td>{{ city.nome }}</td>
              <td class="text-center">{{ city.uf }}</td>
              <td>
                <button type="button" pButton icon="bx bx-trash" pTooltip="Remover"
                        class="p-button-rounded p-button-danger p-button-icon-only p-button-outlined"
                        (click)="removeCity(city)"></button>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </form>
  <div class="flex items-center justify-between mt-4">
    <p-button label="Cancelar" (click)="cancel()" icon="bx bx-left-arrow-alt" styleClass="p-button-danger"></p-button>
    <p-button label="Salvar" (click)="save()" icon="bx bx-save" styleClass="button-theme"></p-button>
  </div>
</div>
